<div class="mb-5">
    <ol class="flex font-semibold text-primary dark:text-white-dark">
        <li class="bg-[#ebedf2] ltr:rounded-l-md rtl:rounded-r-md dark:bg-[#1b2e4b]">
            <a href="javascript:;" (click)="adminsettings()"
                class="relative flex h-full items-center p-1.5 before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-[#ebedf2] hover:text-primary/70 ltr:pl-3 ltr:pr-2 ltr:before:-right-[15px] rtl:pr-3 rtl:pl-2 rtl:before:-left-[15px] rtl:before:rotate-180 dark:before:border-l-[#1b2e4b] dark:hover:text-white-dark/70">
                Admin Settings</a>
        </li>
        <li class="bg-[#ebedf2] ltr:rounded-l-md rtl:rounded-r-md dark:bg-[#1b2e4b]">
            <a href="javascript:;" (click)="toollist()"
                class="relative flex h-full items-center p-1.5 before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-[#ebedf2] hover:text-primary/70 ltr:pl-3 ltr:pr-2 ltr:before:-right-[15px] rtl:pr-3 rtl:pl-2 rtl:before:-left-[15px] rtl:before:rotate-180 dark:before:border-l-[#1b2e4b] dark:hover:text-white-dark/70">
                Tool List</a>
        </li>
        <li class="bg-[#ebedf2] dark:bg-[#1b2e4b]">
            <a
                class="relative flex h-full items-center bg-primary p-1.5 text-white-light before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-primary ltr:pl-6 ltr:pr-2 ltr:before:-right-[15px] rtl:pr-6 rtl:pl-2 rtl:before:-left-[15px] rtl:before:rotate-180">
                Tool Update</a>
        </li>
    </ol>
</div>
<div class="panel flex flex-row w-full ltr:xl:mr-1 rtl:xl:ml-1" *ngIf="!loader">
    <form [formGroup]="ToolForm" class="flex-1 space-y-5 dark:text-white" (ngSubmit)="toolupdate()">
        <div class="mt-1 grid grid-cols-1 justify-between gap-1 sm:grid-cols-1 md:grid-cols-12 xl:grid-cols-12">
            <div class="md:col-span-8 xl:col-span-8">
                <div class="flex flex-row space-x-1">
                    <div class="flex-1">
                        <div
                            [ngClass]="isSubmitForm1 ? ToolForm.controls['toolname'].errors ? 'has-error' : 'has-success' : ''">
                            <label for="Tool Name">Tool Name</label>
                            <div class="relative text-white-dark">
                                <input id="toolname" type="text" placeholder="Enter Tool Name"
                                    class="form-input placeholder:text-white-dark" formControlName="toolname"
                                    required />
                            </div>
                            <ng-container *ngIf="isSubmitForm1 && ToolForm.controls['toolname'].errors">
                                <p class="mt-1 text-danger">Please Provide Tool Name</p>
                            </ng-container>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div
                            [ngClass]="isSubmitForm1 ? ToolForm.controls['availablequantity'].errors ? 'has-error' : 'has-success' : ''">
                            <label for="availableQuantity">Total Stock</label>
                            <div class="relative text-white-dark">
                                <input id="tool_total_quantity" type="number" placeholder="Enter Available Quantity"
                                    class="form-input placeholder:text-white-dark" formControlName="tool_total_quantity"
                                    required (change)="stock_div()" />
                            </div>
                            <ng-container *ngIf="isSubmitForm1 && ToolForm.controls['availablequantity'].errors">
                                <p class="mt-1 text-danger">Please Provide Available Quantity</p>
                            </ng-container>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div
                            [ngClass]="isSubmitForm1 ? ToolForm.controls['price'].errors ? 'has-error' : 'has-success' : ''">
                            <label for="Price">Enter Tool Sale Price</label>
                            <div class="relative text-white-dark">
                                <input id="tool_cost" type="number" placeholder="Enter Tool Price"
                                    class="form-input placeholder:text-white-dark" formControlName="tool_cost"
                                    (change)="rentprice_cal()" min="0" required />
                            </div>
                            <ng-container *ngIf="isSubmitForm1 && ToolForm.controls['price'].errors">
                                <p class="mt-1 text-danger">Please Provide Sale Price</p>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="flex flex-row space-x-6 mt-2">
                    <div class="flex-1">
                        <div
                            [ngClass]="isSubmitForm1 ? ToolForm.controls['tooldescription'].errors ? 'has-error' : 'has-success' : ''">
                            <label for="tooldescription">Tool Description</label>
                            <div class="relative text-white-dark">
                                <textarea id="tooldescription" class="form-textarea mt-4" rows="4"
                                    placeholder="Enter Tool Description" name="tooldescription"
                                    formControlName="tooldescription"></textarea>
                            </div>
                            <ng-container *ngIf="isSubmitForm1 && ToolForm.controls['tooldescription'].errors">
                                <p class="mt-1 text-danger">Please Provide Tool Description</p>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
            <div class="md:col-span-4 xl:col-span-4 flex justify-center items-center">
                <div class="flex flex-row space-x-4">
                    <div class="flex-2">
                        <div class="col-md-12 image-upload" align="center" style="height: 150px">
                            <label for="file-input" class="label col-form-label">Package Image *</label><br />
                            <img [src]="imageurl" class="user-img" accept="image/*" alt="" width="120px"
                                height="120px" />
                            <input id="file-input" #file type="file" (change)="onFileChanged($event)" />
                        </div>
                        <div align="center" style="margin-top: 2%">
                            <button type="button" class="btn btn-info gap-2" (click)="file.click()">
                                CHOOSE
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex flex-row space-x-1">
            <div class="flex-1">
                <label class="inline-flex">
                    <input id="tool_rent_id" type="checkbox" class="form-checkbox text-success" [checked]="tool_rent_id"
                        name="tool_rent_id" />
                    <span>Include in Rent Tool Category</span>
                </label>
            </div>
        </div>
        <div class="mt-1 grid grid-cols-1 justify-between gap-1 sm:grid-cols-1 md:grid-cols-12 xl:grid-cols-12">
            <div class="md:col-span-8 xl:col-span-8">
                <div class="flex flex-row space-x-4">
                    <div class="flex-1">
                        <label for="rentstock">Rent Stock</label>
                        <div class=" relative text-white-dark">
                            <input id="rentstock" type="number" placeholder="Enter Rent Stock"
                                class="form-input placeholder:text-white-dark" formControlName="tool_rent_quantity"
                                required min="0" (change)="stock_cal()" />
                        </div>
                    </div>
                    <div class="flex-1">
                        <label for="rentprice">Rent Price</label>
                        <div class="relative text-white-dark">
                            <input id="rentprice" type="number" placeholder="Enter Rent Price per day"
                                class="form-input placeholder:text-white-dark" formControlName="tool_rent_cost" required
                                min="0" />
                        </div>
                    </div>
                    <div class="flex-1">
                        <label for="rentdelay">Tool Delay Due(%)</label>
                        <div class="relative text-white-dark">
                            <input id="rentdelay" type="number" placeholder="Enter Percentage for delayed return "
                                class="form-input placeholder:text-white-dark" formControlName="tool_delay_percentage"
                                required min="0" (change)="delay_cal()" />
                        </div>
                    </div>
                </div>
                <div class="mt-2 grid grid-cols-1 justify-between gap-2 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-2">
                    <div class="ml-0 rounded-md pb-2 mt-1">
                        <div class="flex-1">
                            <label class="inline-flex">
                                <input id="advanceflag" type="checkbox" class="form-checkbox text-success"
                                     name="advanceflag" [checked]="advanceflag"
                                    (change)="onAdvanceFlagChange($event)" />
                                <span>{{'Need Advance Payment'|translate}}</span>
                            </label>
                        </div>
                    </div>
                    <div class="ml-0 rounded-md pb-2 mt-1">
                        <div class="flex-1">
                            <label class="inline-flex">
                                <input id="depositflag" type="checkbox" class="form-checkbox text-success"
                                [checked]="depositflag" name="depositflag"
                                    (change)="onDepositFlagChange($event)" />
                                <span>{{'Need Deposit'|translate}}</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 justify-between gap-2 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-2">
                    <div class="ml-0 rounded-md pb-2 mt-1">
                        <ng-container *ngIf="ToolForm.value.tool_adv_price==='1'">
                            <div class="flex">
                                <input type="tel" type="number" id="tool_adv_payment"
                                    class="form-input placeholder:text-white-dark" name="tool_adv_payment"
                                    placeholder="Enter Percentage" onKeyPress="if(this.value.length==2) return false;"
                                    oninput="validity.valid||(value='');" min="0" formControlName="tool_adv_payment"
                                    [ngModel]="ToolForm.value.tool_adv_payment" (change)="advpercent_cal()"
                                    style=" width: 100%;" min="0" maxlength="2" />
                                <div
                                    class="bg-[#eee] flex justify-center items-center ltr:rounded-r-md rtl:rounded-l-md px-3 font-semibold border ltr:border-l-0 rtl:border-r-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                    %
                                </div>
                            </div>
                            <span>
                                <p style="font-style:italic;color: red;">{{'Enter Maximum Percentage with respect to Price'|translate}}</p>
                            </span>
                        </ng-container>
                    </div>
                    <div class="ml-0 rounded-md pb-2 mt-1">
                        <ng-container *ngIf="ToolForm.value.tool_deposit_id==='1'">
                            <div class="flex-1">
                                <div class="flex">
                                    <input type="number" id="tool_deposit_price"
                                        class="form-input placeholder:text-white-dark" name="tool_deposit_price"
                                        placeholder="Enter Percentage"
                                        onKeyPress="if(this.value.length==2) return false;"
                                        oninput="validity.valid||(value='');" min="0" formControlName="tool_deposit_price"
                                        [(ngModel)]="ToolForm.value.tool_deposit_price" (change)="depost_cal()"
                                        style=" width: 100%;" min="0">
                                    <div
                                        class="bg-[#eee] flex justify-center items-center ltr:rounded-r-md rtl:rounded-l-md px-3 font-semibold border ltr:border-l-0 rtl:border-r-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                        %
                                    </div>
                                </div>
                                <span>
                                    <p style="font-style:italic;color: red;">{{'Enter Maximum Percentage with respect to Price'|translate}}</p>
                                </span>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
            <div class="md:col-span-4 xl:col-span-4">
                <div class="panel ml-0 rounded-md bg-[#f4f4f4] p-2 pb-2 shadow dark:bg-white-dark/20">
                    <div class="grid grid-cols-1 gap-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-1">
                        <div class="mt-1 flex items-center">
                            <label for="acno" class="mb-0 w-2/3 ltr:mr-2 rtl:ml-2">Available Saleable</label>
                            <label for="acno" class="mb-0 w-1/3 ltr:mr-2 rtl:ml-2">: <b>{{this.s_stock}}</b>
                            </label>
                        </div>
                        <div class="mt-1 flex items-center">
                            <label for="acno" class="mb-0 w-2/3 ltr:mr-2 rtl:ml-2">Available Rent</label>
                            <label for="acno" class="mb-0 w-1/3 ltr:mr-2 rtl:ml-2">:
                                <b>{{this.ToolForm.value.tool_rent_quantity}}</b></label>
                        </div>
                        <div class="mt-1 flex items-center">
                            <label for="acno" class="mb-0 w-2/3 ltr:mr-2 rtl:ml-2">Tool Sale Price</label>
                            <label for="acno" class="mb-0 w-1/3 ltr:mr-2 rtl:ml-2">:
                                <b>{{this.ToolForm.value.tool_cost}}</b>
                            </label>
                        </div>
                        <div class="mt-1 flex items-center">
                            <label for="acno" class="mb-0 w-2/3 ltr:mr-2 rtl:ml-2">Tool Delay Due(%)</label>
                            <label for="acno" class="mb-0 w-1/3 ltr:mr-2 rtl:ml-2">: <b>{{delay_price}}</b></label>
                        </div>
                        <hr class="my-1 border-[#e0e6ed] dark:border-[#1b2e4b]"
                            *ngIf="ToolForm.value.advanceflag === true || ToolForm.value.depositflag === true" />
                        <div class="mt-1 flex items-center" *ngIf="ToolForm.value.advanceflag === true">
                            <label for="acno" class="mb-0 w-2/3 ltr:mr-2 rtl:ml-2" style="color: red;">Advance Price Per
                                Day</label>
                            <label for="acno" class="mb-0 w-1/3 ltr:mr-2 rtl:ml-2">: <b>{{adv_price}}</b></label>
                        </div>
                        <div class="mt-1 flex items-center" *ngIf="ToolForm.value.depositflag === true">
                            <label for="acno" class="mb-0 w-2/3 ltr:mr-2 rtl:ml-2" style="color: red;">Deposit Price Per
                                Day</label>
                            <label for="acno" class="mb-0 w-1/3 ltr:mr-2 rtl:ml-2">: <b>{{dep_price}}</b></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-1">
            <div class="flex justify-end">
                <button type="button" class="btn btn-dark gap-2" style="margin-right: 1%;">
                    Cancel
                </button>
                <button type="submit" class="btn btn-success gap-2">
                    Update
                </button>
            </div>
        </div>
    </form>
</div>
<div class="loader" *ngIf="loader"></div>