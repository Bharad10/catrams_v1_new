<div class="mb-5">
    <ol class="flex font-semibold text-primary dark:text-white-dark">
        <li class="bg-[#ebedf2] ltr:rounded-l-md rtl:rounded-r-md dark:bg-[#1b2e4b]">
            <a href="javascript:;" (click)="servlist()"
                class="relative flex h-full items-center p-1.5 before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-[#ebedf2] hover:text-primary/70 ltr:pl-3 ltr:pr-2 ltr:before:-right-[15px] rtl:pr-3 rtl:pl-2 rtl:before:-left-[15px] rtl:before:rotate-180 dark:before:border-l-[#1b2e4b] dark:hover:text-white-dark/70">
                Service Request</a>
        </li>
        <li class="bg-[#ebedf2] ltr:rounded-l-md rtl:rounded-r-md dark:bg-[#1b2e4b]">
            <a href="javascript:;" (click)="servhist()"
                class="relative flex h-full items-center p-1.5 before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-[#ebedf2] hover:text-primary/70 ltr:pl-3 ltr:pr-2 ltr:before:-right-[15px] rtl:pr-3 rtl:pl-2 rtl:before:-left-[15px] rtl:before:rotate-180 dark:before:border-l-[#1b2e4b] dark:hover:text-white-dark/70">
                Service History</a>
        </li>
        <li class="bg-[#ebedf2] dark:bg-[#1b2e4b]">
            <a
                class="relative flex h-full items-center bg-primary p-1.5 text-white-light before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-primary ltr:pl-6 ltr:pr-2 ltr:before:-right-[15px] rtl:pr-6 rtl:pl-2 rtl:before:-left-[15px] rtl:before:rotate-180">
                Service Details</a>
        </li>

    </ol>
</div>

<div class=" mb-5" *ngIf="loading==false&&request_details">
    <div class="mt-3 flex flex-wrap border-b border-white-light dark:border-[#191e3a]">
        <a href="javascript:;"
            class=" -mb-[1px] flex items-center border border-transparent p-3.5 py-2 !outline-none transition duration-300 hover:text-info"
            [ngClass]="{ '!border-white-light !border-b-white text-info dark:!border-[#191e3a] dark:!border-b-black': tab6.toLowerCase() === 'home' }"
            (click)="tab6 = 'home'">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 ltr:mr-2 rtl:ml-2">
                <path opacity="0.5"
                    d="M2 12.2039C2 9.91549 2 8.77128 2.5192 7.82274C3.0384 6.87421 3.98695 6.28551 5.88403 5.10813L7.88403 3.86687C9.88939 2.62229 10.8921 2 12 2C13.1079 2 14.1106 2.62229 16.116 3.86687L18.116 5.10812C20.0131 6.28551 20.9616 6.87421 21.4808 7.82274C22 8.77128 22 9.91549 22 12.2039V13.725C22 17.6258 22 19.5763 20.8284 20.7881C19.6569 22 17.7712 22 14 22H10C6.22876 22 4.34315 22 3.17157 20.7881C2 19.5763 2 17.6258 2 13.725V12.2039Z"
                    stroke="currentColor" stroke-width="1.5" />
                <path d="M12 15L12 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            General Details
        </a>

        <a href="javascript:;" *ngIf="this.request_details.serm_status != 34"
            class="-mb-[1px] flex items-center border border-transparent p-3.5 py-2 !outline-none transition duration-300 hover:text-info"
            [ngClass]="{ '!border-white-light !border-b-white text-info dark:!border-[#191e3a] dark:!border-b-black': tab6.toLowerCase() === 'service_details' }"
            (click)="tab6 = 'service_details'">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 ltr:mr-2 rtl:ml-2">
                <path opacity="0.5"
                    d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z"
                    stroke="currentColor" stroke-width="1.5" />
                <path d="M6 15.8L7.14286 17L10 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                <path d="M6 8.8L7.14286 10L10 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                <path d="M13 9L18 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <path d="M13 16L18 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>


            Services Details
        </a>

        <a href="javascript:;" *ngIf="this.request_details.serm_status != 34"
            class="-mb-[1px] flex items-center border border-transparent p-3.5 py-2 !outline-none transition duration-300 hover:text-info"
            [ngClass]="{ '!border-white-light !border-b-white text-info dark:!border-[#191e3a] dark:!border-b-black': tab6.toLowerCase() === 'payment_tab' }"
            (click)="tab6 = 'payment_tab';fetch_payment_history()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 ltr:mr-2 rtl:ml-2">
                <path
                    d="M2 12C2 8.22876 2 6.34315 3.17157 5.17157C4.34315 4 6.22876 4 10 4H14C17.7712 4 19.6569 4 20.8284 5.17157C22 6.34315 22 8.22876 22 12C22 15.7712 22 17.6569 20.8284 18.8284C19.6569 20 17.7712 20 14 20H10C6.22876 20 4.34315 20 3.17157 18.8284C2 17.6569 2 15.7712 2 12Z"
                    stroke="currentColor" stroke-width="1.5" />
                <path opacity="0.5" d="M10 16.5H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <path opacity="0.5" d="M8 13.5H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <path opacity="0.5" d="M2 10L22 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <path opacity="0.5"
                    d="M14 15C14 14.0572 14 13.5858 14.2929 13.2929C14.5858 13 15.0572 13 16 13C16.9428 13 17.4142 13 17.7071 13.2929C18 13.5858 18 14.0572 18 15C18 15.9428 18 16.4142 17.7071 16.7071C17.4142 17 16.9428 17 16 17C15.0572 17 14.5858 17 14.2929 16.7071C14 16.4142 14 15.9428 14 15Z"
                    stroke="currentColor" stroke-width="1.5" />
            </svg>

            Payment Details
        </a>
    </div>
    <ng-container>


        <div class="mb-5 grid gap-6 xl:grid-cols-3">
            <div class="panel h-full xl:col-span-2">
                <div class=" flex-1 border border-t-0 border-white-light p-4 text-sm dark:border-[#191e3a]">
                    <div *ngIf="tab6.toLowerCase() === 'home'">
                        <div class=" flex-1 px-0 py-6 ltr:xl:mr-6 rtl:xl:ml-6">
                            <div class="mt-8 px-4">
                                <div class="mb-5 flex flex-col sm:flex-row">
                                    <div class="mb-6 w-full lg:w-1/2 ltr:lg:mr-6 rtl:lg:ml-6">

                                        <div class="text-lg font-semibold" style="font-size: 25px;">Service Details
                                            :-<span class="bg-color">{{request_details.serm_number}}</span> </div>
                                        <br> <br>
                                        <div class="flex">
                                            <div
                                                class="bg-[#e0e6ed] flex justify-center items-center ltr:rounded-l-md
                                                 rtl:rounded-r-md px-3 font-semibold border ltr:border-r-0
                                                  rtl:border-l-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                                Request Created
                                                On</div>
                                            <input id="reciever-number" type="text" name="reciever-number"
                                                class="form-input flex-1" [(ngModel)]="date" readonly name="phone" />
                                        </div>
                                        <br>
                                        <div class="flex" *ngIf="request_details.assignee_name">
                                            <div
                                                class="bg-[#e0e6ed] flex justify-center items-center ltr:rounded-l-md
                                                 rtl:rounded-r-md px-3 font-semibold border ltr:border-r-0
                                                  rtl:border-l-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                                Assignee</div>
                                            <input id="reciever-number" type="text" name="reciever-number"
                                                class="form-input flex-1" [(ngModel)]="request_details.assignee_name"
                                                readonly name="phone" />
                                        </div>
                                    </div>
                                    <ng-container *ngIf="this.request_details.serm_status!=34">
                                        <div class="lg:w-1/2" *ngIf="this.role_id==1||this.role_id==2">
                                            <ng-container *ngIf="request_details.days_left_to_reopen==0">
                                                <button type="button"
                                                    [disabled]="request_details.days_left_to_reopen==0"
                                                    class="btn btn-info my-4"
                                                    (click)="custom_confirm_modal(request_details)">
                                                    Work Card Re-opened
                                                </button>

                                            </ng-container>
                                            <ng-container *ngIf="request_details.days_left_to_reopen!=0">
                                                <button type="button"
                                                    [disabled]="reOpenFlag"
                                                    class="btn btn-info my-4"
                                                    (click)="custom_confirm_modal(request_details)">Re-open Work Card  
                                                    <span
                                                        class="badge my-0 bg-white-light text-black ltr:ml-4 rtl:mr-4">{{request_details.days_left_to_reopen}}
                                                        Days Left</span>
                                                    <span class="badge my-0 bg-white-light text-black ltr:ml-4 rtl:mr-4"
                                                        *ngIf="reOpenFlag"><svg viewBox="0 0 24 24" width="24"
                                                            height="24" stroke="currentColor" stroke-width="1.5"
                                                            fill="none" stroke-linecap="round" stroke-linejoin="round"
                                                            class="inline-block h-5 w-5 shrink-0 animate-[spin_2s_linear_infinite] align-middle">
                                                            <line x1="12" y1="2" x2="12" y2="6"></line>
                                                            <line x1="12" y1="18" x2="12" y2="22">
                                                            </line>
                                                            <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                            <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                            <line x1="2" y1="12" x2="6" y2="12"></line>
                                                            <line x1="18" y1="12" x2="22" y2="12">
                                                            </line>
                                                            <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                            <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                        </svg></span></button>


                                            </ng-container>
                                            <ng-container
                                                *ngIf="request_details.rpt_data.rpt_status!=1||request_details.rpt_data.rpt_status!=3">
                                                <button type="button" class="btn btn-warning my-4"
                                                    (click)="payment.open()"
                                                    [disabled]="request_details.rpt_data.rpt_status==1||request_details.rpt_data.rpt_status==3">
                                                    {{request_details.rpt_data.rpt_status==1||request_details.rpt_data.rpt_status==3?'Payment paid':'Waive off payment'}}
                                                </button>

                                                <modal #payment>
                                                    <ng-template #modalHeader>
                                                        <div>Payment</div>
                                                    </ng-template>
                                                    <ng-template #modalBody>
                                                        <div class="panel">
                                                            <div>
                                                                <div class="mt-4 flex  items-center">
                                                                    <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                             font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                              dark:border-[#17263c] dark:bg-[#1b2e4b]"> Total Amount
                                                                    </div>
                                                                    <input type="text" placeholder="cstm_name"
                                                                        class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                                        [(ngModel)]="request_details.serm_cost"
                                                                        readonly />
                                                                </div>
                                                                <br><br>
                                                                <div class="mt-4 flex  items-center">
                                                                    <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                             font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                              dark:border-[#17263c] dark:bg-[#1b2e4b]"> Advance Amount
                                                                        Paid
                                                                    </div>
                                                                    <input type="text" placeholder="cstm_phone"
                                                                        class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                                        [(ngModel)]="request_details.serm_custpay_amount"
                                                                        readonly />
                                                                </div>
                                                                <br><br>
                                                                <div class="mt-4 flex  items-center">
                                                                    <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                             font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                              dark:border-[#17263c] dark:bg-[#1b2e4b]"> Amount To be
                                                                        Waived Off</div>
                                                                    <input type="number" placeholder="cstm_email"
                                                                        class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                                        readonly [(ngModel)]="custom_cost"
                                                                        (change)="amount($event,1)" />
                                                                </div>

                                                                <div class="mt-4 flex  items-center">
                                                                    <div
                                                                        class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                                 font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b] whitespace-nowrap">
                                                                        Refer For Closure</div>
                                                                    <textarea rows="4"
                                                                        class="form-textarea ltr:rounded-l-none rtl:rounded-r-none"
                                                                        [(ngModel)]="reason"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                    <ng-template #modalFooter>
                                                        <button type="button" (click)="payment.close()"
                                                            class="btn btn-outline-danger">Close</button>
                                                        &nbsp;
                                                        <button type="button" (click)="payoffcost()"
                                                            [disabled]="!reason" class="btn btn-outline-success">Waive
                                                            Off</button>
                                                    </ng-template>
                                                </modal>
                                            </ng-container>

                                        </div>
                                    </ng-container>

                                </div>

                                <br>
                                <hr>
                                <br>



                                <div>

                                    <div class="mb-5 flex flex-col sm:flex-row">
                                        <div class="mx-10 mb-5 sm:mb-0">
                                            <div class="m-auto w-24 text-center font-semibold">
                                                <a style="    font-weight: 100;" href="javascript:;"
                                                    class="relative -mb-[1px] block border-white-light p-3.5 py-4 !outline-none transition duration-300 before:absolute before:bottom-0 before:top-0 before:m-auto before:h-0 before:w-[1px] before:bg-info before:transition-all before:duration-700 hover:text-info hover:before:h-[80%] ltr:border-r ltr:before:-right-[1px] rtl:border-l rtl:before:-left-[1px] dark:border-[#191e3a]"
                                                    [ngClass]="{ 'text-info before:!h-[80%]': tab10.toLowerCase() === 'home' }"
                                                    (click)="tab10 = 'home'">
                                                    Customer Details
                                                </a>
                                                <br>
                                                <a style="    font-weight: 100;" href="javascript:;"
                                                    class="relative -mb-[1px] block border-white-light p-3.5 py-4 !outline-none transition duration-300 before:absolute before:bottom-0 before:top-0 before:m-auto before:h-0 before:w-[1px] before:bg-info before:transition-all before:duration-700 hover:text-info hover:before:h-[80%] ltr:border-r ltr:before:-right-[1px] rtl:border-l rtl:before:-left-[1px] dark:border-[#191e3a]"
                                                    [ngClass]="{ 'text-info before:!h-[80%]': tab10.toLowerCase() === 'profile' }"
                                                    (click)="tab10 = 'profile'">
                                                    Vehicle Details
                                                </a>
                                                <br>
                                                <a style="    font-weight: 100;" href="javascript:;"
                                                    class="relative -mb-[1px] block border-white-light p-3.5 py-4 !outline-none transition duration-300 before:absolute before:bottom-0 before:top-0 before:m-auto before:h-0 before:w-[1px] before:bg-info before:transition-all before:duration-700 hover:text-info hover:before:h-[80%] ltr:border-r ltr:before:-right-[1px] rtl:border-l rtl:before:-left-[1px] dark:border-[#191e3a]"
                                                    [ngClass]="{ 'text-info before:!h-[80%]': tab10.toLowerCase() === 'messages' }"
                                                    (click)="tab10 = 'messages'">
                                                    Medias
                                                </a>

                                            </div>
                                        </div>
                                        <div class="flex-1 text-sm">
                                            <div *ngIf="tab10.toLowerCase() === 'home'">

                                                <div class="lg:w-1/2">
                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                                            <span class="text-small-size">Customer Name</span>
                                                        </div>
                                                        <input type="text" placeholder="cstm_name"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.cstm_name" readonly />
                                                    </div>
                                                    <br><br>
                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                                            <span class="text-small-size">Customer Phone Number</span>

                                                        </div>
                                                        <input type="text" placeholder="cstm_phone"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.cstm_phone" readonly />
                                                    </div>
                                                    <br><br>
                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]">
                                                            <span class="text-small-size">Customer Email</span>

                                                        </div>
                                                        <input type="text" placeholder="cstm_email"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.cstm_email" readonly />
                                                    </div>
                                                </div>


                                            </div>
                                            <div *ngIf="tab10.toLowerCase() === 'profile'">
                                                <div class="lg:w-1/2">

                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]"> Vehicle Brand</div>
                                                        <input type="text" placeholder="make_name"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.make_name" readonly />
                                                    </div> <br><br>
                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]"> Vehicle Model</div>
                                                        <input type="text" placeholder="model_name"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.model_name" readonly />
                                                    </div> <br><br>
                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]"> Vehicle Varient</div>
                                                        <input type="text" placeholder="variant_name"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.variant_name" readonly />
                                                    </div> <br><br>
                                                    <div class="mt-4 flex  items-center">
                                                        <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                                    font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                                     dark:border-[#17263c] dark:bg-[#1b2e4b]"> Vehicle Vin
                                                            Number</div>
                                                        <input type="text" placeholder="custveh_vinnumber"
                                                            class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                            [(ngModel)]="request_details.model_name" readonly />
                                                    </div>

                                                </div>

                                            </div>
                                            <div *ngIf="tab10.toLowerCase() === 'messages'">

                                                <div class="mt-4 flex items-center">
                                                    <div class="flex items-center justify-center">
                                                        <button type="button" class="btn btn-info"
                                                            (click)="attach.open()">View
                                                            Attachments</button>
                                                    </div>


                                                    <modal #attach>
                                                        <ng-template #modalHeader>
                                                            <div>ATTACHMENTS</div>
                                                        </ng-template>
                                                        <ng-template #modalBody>
                                                            <div class="panel">
                                                                <div *ngFor="let data of medias">
                                                                    <div class="mt-8 px-4" *ngIf="data.smedia_type==0">
                                                                        <div>
                                                                            <label for="notes">Service Images From
                                                                                Customer</label>
                                                                            <img src="{{baseurl+data.smedia_url}}"
                                                                                class="max-h-80 w-full object-cover"
                                                                                style="max-height:fit-content;"
                                                                                alt="" />

                                                                            <br><br>

                                                                        </div>
                                                                    </div>
                                                                    <div class="mt-8 px-4" *ngIf="data.smedia_type==1">
                                                                        <div>
                                                                            <label for="notes">Audio if any From
                                                                                Customer</label>
                                                                            <audio controls>
                                                                                <source
                                                                                    src="{{baseurl+data.smedia_url}}" />
                                                                            </audio>
                                                                            <br><br>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <ng-template #modalFooter>
                                                            <button type="button" (click)="attach.close()"
                                                                class="btn btn-outline-danger">Close</button>
                                                        </ng-template>
                                                    </modal>
                                                </div>



                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                    </div>


                    <div *ngIf="tab6.toLowerCase() === 'service_details'">
                        <div class="mt-8">
                            <div class="table-responsive">
                                <table>
                                    <thead style="text-align: justify;">
                                        <tr>
                                            <th>Service</th>
                                            <th>Status</th>
                                            <th>Work Started on</th>
                                            <th>Work Completed on</th>
                                        </tr>
                                    </thead>
                                    <tbody style="text-align: right;">
                                        <ng-container *ngFor="let item of services; index as i">
                                            <ng-container *ngIf="item.sitem_type==0">
                                                <tr class="align-top">
                                                    <td>
                                                        <input type="text" class="form-input min-w-[200px]"
                                                            placeholder="Enter Item Name"
                                                            [(ngModel)]="item.servpack_name" name="service_name_{{i}}"
                                                            readonly />
                                                        <ng-template #itemTemplate let-item>
                                                            <a [innerHTML]="item.servpack_name"></a>
                                                        </ng-template>

                                                        <ng-template #notFoundTemplate let-notFound>
                                                            <div [innerHTML]="notFound"></div>
                                                        </ng-template>
                                                    </td>
                                                    <td>
                                                        <span class="badge badge-outline-warning rounded-none"
                                                            *ngIf="item.sitem_status_flag==0">
                                                            Service Pending

                                                        </span>
                                                        <span class="badge badge-outline-info rounded-none"
                                                            *ngIf="item.sitem_status_flag==1">Service In Progress</span>
                                                        <span class="badge badge-outline-success rounded-none"
                                                            *ngIf="item.sitem_status_flag==2">Service Completed</span>
                                                    </td>
                                                    <td style="text-align: left;">
                                                        <span>
                                                            {{ item.sitem_createdon | date:'dd-MMM-yyyy hh:mm a' }}


                                                        </span>
                                                    </td>
                                                    <td style="text-align: right;">
                                                        <span>{{item.sitem_updatedon | date:'dd-MMM-yyyy hh:mm
                                                            a'}}</span>
                                                    </td>
                                                </tr>
                                            </ng-container>

                                            <ng-container *ngIf="item.sitem_type==1">
                                                <tr class="align-top">
                                                    <td>
                                                        <input type="text" class="form-input min-w-[200px]"
                                                            placeholder="Enter Item Name" [(ngModel)]="item.tool_name"
                                                            name="service_name_{{i}}" readonly />
                                                        <ng-template #itemTemplate let-item>
                                                            <a [innerHTML]="item.tool_name"></a>
                                                        </ng-template>

                                                        <ng-template #notFoundTemplate let-notFound>
                                                            <div [innerHTML]="notFound"></div>
                                                        </ng-template>
                                                    </td>
                                                    <td>
                                                        <span class="badge badge-outline-warning rounded-none"
                                                            *ngIf="item.sitem_status_flag==3">Tool Recommendation
                                                            Pending</span>
                                                        <span class="badge badge-outline-success rounded-none"
                                                            *ngIf="item.sitem_status_flag==4">Tool Recommendation
                                                            Accepted</span>
                                                        <span class="badge badge-outline-danger rounded-none"
                                                            *ngIf="item.sitem_status_flag==5">Tool Recommendation
                                                            Rejected</span>
                                                    </td>
                                                    <td style="text-align: left;">
                                                        <span>
                                                            {{ item.sitem_createdon | date:'dd-MMM-yyyy hh:mm a' }}


                                                        </span>
                                                    </td>
                                                    <td style="text-align: right;">
                                                        <span>{{item.sitem_updatedon | date:'dd-MMM-yyyy hh:mm
                                                            a'}}</span>
                                                    </td>
                                                </tr>
                                            </ng-container>

                                        </ng-container>


                                        <tr>
                                            <td colspan="3">

                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>


                    <div *ngIf="tab6.toLowerCase() === 'payment_tab'">
                        <div>

                            <div class="mb-5 flex flex-col sm:flex-row">
                                <div class="mx-10 mb-5 sm:mb-0">
                                    <div class="m-auto w-24 text-center font-semibold">
                                        <a style="    font-weight: 100;" href="javascript:;"
                                            class="relative -mb-[1px] block border-white-light p-3.5 py-4 !outline-none transition duration-300 before:absolute before:bottom-0 before:top-0 before:m-auto before:h-0 before:w-[1px] before:bg-info before:transition-all before:duration-700 hover:text-info hover:before:h-[80%] ltr:border-r ltr:before:-right-[1px] rtl:border-l rtl:before:-left-[1px] dark:border-[#191e3a]"
                                            [ngClass]="{ 'text-info before:!h-[80%]': tab11.toLowerCase() === 'home' }"
                                            (click)="tab11 = 'home'">
                                            Details
                                        </a>
                                        <br>
                                        <a style="    font-weight: 100;" href="javascript:;"
                                            class="relative -mb-[1px] block border-white-light p-3.5 py-4 !outline-none transition duration-300 before:absolute before:bottom-0 before:top-0 before:m-auto before:h-0 before:w-[1px] before:bg-info before:transition-all before:duration-700 hover:text-info hover:before:h-[80%] ltr:border-r ltr:before:-right-[1px] rtl:border-l rtl:before:-left-[1px] dark:border-[#191e3a]"
                                            [ngClass]="{ 'text-info before:!h-[80%]': tab11.toLowerCase() === 'profile' }"
                                            (click)="tab11 = 'profile'">
                                            History Status
                                        </a>


                                    </div>
                                </div>
                                <div class="flex-1 text-sm">
                                    <div *ngIf="tab11.toLowerCase() === 'home'">
                                        <div class="mt-8">
                                            <div class="table-responsive">
                                                <table>
                                                    <thead style="text-align: justify;">
                                                        <tr>
                                                            <th>Service</th>
                                                            <th>Status</th>
                                                            <th>Status Updated On</th>

                                                            <th style="text-align: right;">Service Cost</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody style="text-align: right;">
                                                        <ng-container *ngFor="let item of services; index as i">
                                                            <ng-container *ngIf="item.sitem_type==0">
                                                                <tr class="align-top">
                                                                    <td>
                                                                        <input type="text"
                                                                            class="form-input min-w-[200px]"
                                                                            placeholder="Enter Item Name"
                                                                            [(ngModel)]="item.servpack_name"
                                                                            name="service_name_{{i}}" readonly />
                                                                        <ng-template #itemTemplate let-item>
                                                                            <a [innerHTML]="item.servpack_name"></a>
                                                                        </ng-template>

                                                                        <ng-template #notFoundTemplate let-notFound>
                                                                            <div [innerHTML]="notFound"></div>
                                                                        </ng-template>
                                                                    </td>
                                                                    <td>
                                                                        <span
                                                                            *ngIf="item.sitem_status_flag==0">Pending</span>
                                                                        <span *ngIf="item.sitem_status_flag==1">In
                                                                            Progress</span>
                                                                        <span
                                                                            *ngIf="item.sitem_status_flag==2">Completed</span>
                                                                    </td>
                                                                    <td>
                                                                        <span>
                                                                            {{ item.sitem_updatedon | date:'dd-MMM-yyyy
                                                                            hh:mm a' }}


                                                                        </span>
                                                                    </td>

                                                                    <td style="text-align: right;">
                                                                        <span>{{item.sitem_cost}}</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-container>


                                                            <ng-container *ngIf="item.sitem_type==1">
                                                                <ng-container
                                                                    *ngIf="item.sitem_status_flag==3||item.sitem_status_flag==5">
                                                                    <tr class="align-top"
                                                                        style="background-color: antiquewhite;">
                                                                        <td>
                                                                            <input type="text"
                                                                                class="form-input min-w-[200px]"
                                                                                placeholder="Enter Item Name"
                                                                                [(ngModel)]="item.tool_name"
                                                                                name="service_name_{{i}}" readonly />
                                                                            <ng-template #itemTemplate let-item>
                                                                                <a [innerHTML]="item.tool_name"></a>
                                                                            </ng-template>

                                                                            <ng-template #notFoundTemplate let-notFound>
                                                                                <div [innerHTML]="notFound"></div>
                                                                            </ng-template>
                                                                        </td>
                                                                        <td>
                                                                            <span *ngIf="item.sitem_status_flag==3">Tool
                                                                                Recommendation Pending</span>
                                                                            <span *ngIf="item.sitem_status_flag==4">Tool
                                                                                Recommendation Accepted</span>
                                                                            <span *ngIf="item.sitem_status_flag==5">Tool
                                                                                Recommendation Rejected</span>
                                                                        </td>
                                                                        <td>
                                                                            <span>
                                                                                {{ item.sitem_updatedon |
                                                                                date:'dd-MMM-yyyy hh:mm a' }}
                                                                            </span>
                                                                        </td>
                                                                        <td style="text-align: right;">
                                                                            <span>{{item.sitem_cost}}(Not
                                                                                Included)</span>
                                                                        </td>
                                                                    </tr>
                                                                </ng-container>


                                                                <ng-container *ngIf="item.sitem_status_flag==4">
                                                                    <tr class="align-top">
                                                                        <td>
                                                                            <input type="text"
                                                                                class="form-input min-w-[200px]"
                                                                                placeholder="Enter Item Name"
                                                                                [(ngModel)]="item.tool_name"
                                                                                name="service_name_{{i}}" readonly />
                                                                            <ng-template #itemTemplate let-item>
                                                                                <a [innerHTML]="item.tool_name"></a>
                                                                            </ng-template>

                                                                            <ng-template #notFoundTemplate let-notFound>
                                                                                <div [innerHTML]="notFound"></div>
                                                                            </ng-template>
                                                                        </td>
                                                                        <td>
                                                                            <span *ngIf="item.sitem_status_flag==3">Tool
                                                                                Recommendation Pending</span>
                                                                            <span *ngIf="item.sitem_status_flag==4">Tool
                                                                                Recommendation Accepted</span>
                                                                            <span *ngIf="item.sitem_status_flag==5">Tool
                                                                                Recommendation Rejected</span>
                                                                        </td>
                                                                        <td>
                                                                            <span>
                                                                                {{ item.sitem_updatedon |
                                                                                date:'dd-MMM-yyyy hh:mm a' }}


                                                                            </span>
                                                                        </td>
                                                                        <td style="text-align: right;">
                                                                            <span>{{item.sitem_cost}}</span>
                                                                        </td>
                                                                    </tr>
                                                                </ng-container>

                                                            </ng-container>

                                                        </ng-container>
                                                        <tr style="background-color: #f6f8fa82;">
                                                            <td colspan="3">
                                                                <b>Sub Total</b>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <b>{{subtotal}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr style="background-color: #f6f8fa;">
                                                            <td colspan="3">
                                                                <b>Additional Charges</b>
                                                                <ng-container *ngIf="request_details.serm_ad_charge">
                                                                    (<b>{{request_details.serm_ad_charge}}</b>)
                                                                </ng-container>

                                                            </td>

                                                            <td style="text-align: right;">
                                                                <b>{{request_details.serm_ad_charge_cost}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr style="background-color: #e6e7e8;">
                                                            <td colspan="3">
                                                                <b>Total</b>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <b>{{request_details.serm_cost}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr style="background-color: #e6e7e8;"
                                                            *ngIf="request_details.cstm_type==1">
                                                            <td colspan="2">
                                                                <b>Discount(If any)</b>
                                                            </td>
                                                            <td colspan="1">
                                                                <ng-container
                                                                    *ngIf="request_details.customer_dicounts.cd_type==0">
                                                                    <b>₹
                                                                        {{request_details.customer_dicounts.cd_rate}}</b>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="request_details.customer_dicounts.cd_type==1">
                                                                    <b>{{request_details.customer_dicounts.cd_rate}}%</b>
                                                                </ng-container>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <b>{{request_details.serm_discount_amount}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr style="background-color: #f4f4f4;">
                                                            <td colspan="3">
                                                                <b>Advance Amount(If any)</b>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <b>{{request_details.serm_custpay_amount}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr style="background-color: #e3ecf6;">
                                                            <td colspan="3">
                                                                <b>Total After Advance Amount</b>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <b>{{amounttopay}}</b>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                        <!-- <div class="lg:w-1/2">

                                            <div class="mt-4 flex  items-center">
                                                <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                            font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                             dark:border-[#17263c] dark:bg-[#1b2e4b]"> GRAND TOTAL</div>
                                                <input type="text" placeholder="cstm_name"
                                                    class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                    [(ngModel)]="request_details.serm_cost" readonly />
                                            </div>

                                            <div class="mt-4 flex  items-center">
                                                <div class="bg-[#eee] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 
                                            font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed]
                                             dark:border-[#17263c] dark:bg-[#1b2e4b]">Advance From Customer</div>
                                                <input type="text" placeholder="cstm_name"
                                                    class="form-input ltr:rounded-l-none rtl:rounded-r-none"
                                                    [(ngModel)]="request_details.serm_custpay_amount" readonly />
                                            </div>
                                        </div> -->



                                    </div>
                                    <div *ngIf="tab11.toLowerCase() === 'profile'">
                                        <div class="datatable">
                                            <ng-datatable [rows]="rows" [columns]="cols"
                                                skin="whitespace-nowrap bh-table-hover" [loading]="payloading"
                                                firstArrow='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M13 19L7 12L13 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path opacity="0.5" d="M16.9998 19L10.9998 12L16.9998 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>'
                                                lastArrow='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M11 19L17 12L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path opacity="0.5" d="M6.99976 19L12.9998 12L6.99976 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg> '
                                                previousArrow='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M15 5L9 12L15 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>'
                                                nextArrow='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M9 5L15 12L9 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>'>

                                                <ng-template slot="created_by" let-value="data">

                                                    <ng-container *ngIf="value.rph_by_type==0">
                                                        <span
                                                            class="badge badge-outline-success rounded-none">{{value.cstm_name}}</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_by_type==1">
                                                        <span
                                                            class="badge badge-outline-info rounded-none">{{value.us_firstname}}</span>
                                                    </ng-container>

                                                </ng-template>

                                                <ng-template slot="rph_created_on" let-value="data">

                                                    <span style="    font-size: smaller;">{{ value.rph_created_on |
                                                        date:'dd-MMM-yyyy hh:mm a' }} </span>
                                                </ng-template>
                                                <ng-template slot="t_id" let-value="data">
                                                    <span style=" font-size: smaller;"><b>{{ value.rph_transaction_id
                                                            }}</b></span>

                                                </ng-template>

                                                <ng-template slot="status" let-value="data">

                                                    <ng-container *ngIf="value.rph_status==0">
                                                        <span class="badge badge-outline-warning rounded-none">PAYMENT
                                                            PENDING</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_status==1">
                                                        <span class="badge badge-outline-info rounded-none">PAYMENT
                                                            INTIATED</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_status==2">
                                                        <span class="badge badge-outline-success rounded-none">PAYMENT
                                                            SUCCESS</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_status==3">
                                                        <span class="badge badge-outline-danger rounded-none">PAYMENT
                                                            FAILED</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_status==4">
                                                        <span class="badge badge-outline-info rounded-none">REFUND
                                                            INTIATED</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_status==5">
                                                        <span class="badge badge-outline-success rounded-none">REFUND
                                                            SUCCESS</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="value.rph_status==6">
                                                        <span class="badge badge-outline-danger rounded-none">REFUND
                                                            FAILED</span>
                                                    </ng-container>

                                                </ng-template>
                                            </ng-datatable>
                                        </div>

                                    </div>


                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="panel h-full">

                <br> <br> <br> <br>
                <div class="text-lg font-semibold" style="font-size: 25px;">Status History:-</div>
                <br>
                <blockquote
                    class="rounded-tr-md rounded-br-md border border-l-2 border-white-light !border-l-primary bg-white p-5 text-black shadow-md ltr:pl-3.5 rtl:pr-3.5 dark:border-[#060818] dark:bg-[#060818]">
                    <div class="flex-1">

                        <div class="relative text-white-dark">

                            <div class="mb-5" style="max-height: 400px; overflow-y: auto;">
                                <div *ngFor="let data of history_list; let last = last">
                                    <div class="mx-auto max-w-[900px]">
                                        <div class="flex">
                                            <b>
                                                <p class="min-w-[58px] max-w-[100px] py-2.5 text-base font-semibold text-[#3b3f5c] dark:text-white-light"
                                                    style="font-size: 13px; color: currentColor; font-family: system-ui;">
                                                    {{ data.status_created_on | date:'dd-MMM-yyyy hh:mm a' }}
                                                </p>
                                            </b>
                                            <div
                                                class="relative before:absolute before:left-1/2 before:top-[15px] before:h-2.5 before:w-2.5 before:-translate-x-1/2 before:rounded-full before:border-2 before:border-primary after:absolute after:left-1/2 after:top-[25px] after:-bottom-[15px] after:h-auto after:w-0 after:-translate-x-1/2 after:rounded-full after:border-l-2 after:border-primary">
                                            </div>
                                            <div class="self-center p-2.5 ltr:ml-2.5 rtl:ml-2.5 rtl:ltr:mr-2.5">
                                                <span class="badge badge-outline-success"
                                                    *ngIf="data.status_id==23 || data.status_id==24 || data.status_id==29 || data.status_id==31||data.status_id==57 || data.status_id==32 || data.status_id==33">
                                                    {{ data.status_name }}</span>
                                                <span class="badge badge-outline-warning"
                                                    *ngIf="data.status_id==20|| data.status_id==28 || data.status_id==30 || data.status_id==35|| data.status_id==50||data.status_id==58 ">
                                                    {{ data.status_name }}</span>
                                                <span class="badge badge-outline-danger"
                                                    *ngIf="data.status_id==22 || data.status_id==34|| data.status_id==56 ">{{
                                                    data.status_name }}</span>
                                                <span class="badge badge-outline-primary"
                                                    *ngIf="data.status_id==21 || data.status_id==19 || data.status_id==25">{{
                                                    data.status_name }}</span>
                                                <span class="badge badge-outline-info"
                                                    *ngIf="data.status_id==26 || data.status_id==27 ">{{
                                                    data.status_name }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="data.status_id==30">
                                        <button *ngIf="last">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M12 7V13" stroke="currentColor" stroke-width="1.5"
                                                    stroke-linecap="round" />
                                                <circle cx="12" cy="16" r="1" fill="#1C274C" />
                                                <path opacity="0.5"
                                                    d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z"
                                                    stroke="currentColor" stroke-width="1.5" />
                                            </svg>
                                            <span class="badge badge-outline-warning rounded-full">Payment Pending from
                                                customer</span>
                                        </button>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                </blockquote>

            </div>
        </div>


    </ng-container>

</div>

<div class=" loader" *ngIf="loading==true||!request_details"> </div>